{"version":3,"sources":["store/music.types.ts","store/music.reducer.ts","store/music.mock.ts","store/music.initial.ts","contexts.ts","components/Header/Header.tsx","components/CardPlayer/CardPlayer.styles.ts","components/CardPlayer/CardPlayer.tsx","index.tsx","App.tsx"],"names":["MusicActionTypes","setNextTrack","state","nextTrackIndex","nextTrack","album","tracks","isDisablePrev","isDisabpleNext","length","currentTrack","currentTrackIndex","musicReducer","action","type","NEXT_TRACK","PREV_TRACK","albumes","title","link","cover","genres","id","name","picture","artist","preview","initMusicState","MusicContext","React","createContext","dispatch","musicState","Header","Typography","variant","align","useStyles","makeStyles","theme","audio","display","root","details","flexDirection","alignItems","flex","content","width","controls","paddingLeft","spacing","paddingBottom","playIcon","height","CardPlayer","useState","isPlay","setIsPlay","audioRef","useRef","useContext","dispatchMusicState","track","classes","useEffect","current","play","pause","Card","className","CardContent","component","color","IconButton","aria-label","onClick","disabled","prevIsPlay","key","ref","src","CardMedia","image","ReactDOM","render","useReducer","musicContextValue","useMemo","Provider","value","CssBaseline","Box","m","mb","document","getElementById"],"mappings":"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","file":"static/js/main.df621cbb.chunk.js","sourcesContent":["export interface Track {\n  id: number;\n  title: string;\n  link: string;\n  preview: string;\n}\n\nexport interface Genre {\n  id: number;\n  name: string;\n  picture: string;\n  type: string;\n}\n\nexport interface Artist {\n  id: number;\n  name: string;\n  picture: string;\n}\n\nexport interface Album {\n  title: string;\n  link: string;\n  cover: string;\n  genres: Genre[];\n  artist: Artist;\n  tracks: Track[];\n}\n\nexport enum MusicActionTypes {\n  NEXT_TRACK,\n  PREV_TRACK\n}\n\nexport interface MusicState {\n  albumes: Album[];\n  isDisabpleNext: boolean;\n  isDisablePrev: boolean;\n  currentTrack: Track;\n  currentTrackIndex: number;\n  album: Album;\n}\n\nexport interface MusicAction {\n  type: MusicActionTypes;\n}\n","import { MusicState, MusicActionTypes, MusicAction } from \"./music.types\";\n\nfunction setNextTrack(state: MusicState, nextTrackIndex: number): MusicState {\n  const nextTrack = state.album.tracks[nextTrackIndex];\n\n  if (!nextTrack) {\n    return state;\n  }\n\n  return {\n    ...state,\n    isDisablePrev: nextTrackIndex === 0,\n    isDisabpleNext: nextTrackIndex === state.album.tracks.length,\n    currentTrack: nextTrack,\n    currentTrackIndex: nextTrackIndex\n  };\n}\n\nexport function musicReducer(\n  state: MusicState,\n  action: MusicAction\n): MusicState {\n  switch (action.type) {\n    case MusicActionTypes.NEXT_TRACK:\n      const nextTrackIndex = state.currentTrackIndex + 1;\n\n      return setNextTrack(state, nextTrackIndex);\n    case MusicActionTypes.PREV_TRACK:\n      const prevTrackIndex = state.currentTrackIndex - 1;\n\n      return setNextTrack(state, prevTrackIndex);\n    default:\n      return state;\n  }\n}\n","import { Album } from \"./music.types\";\n\nexport const albumes: Album[] = [\n  {\n    title: \"Лучшее, часть 1\",\n    link: \"https://www.deezer.com/album/15534362\",\n    cover:\n      \"https://cdns-images.dzcdn.net/images/cover/c0d347b114b8819e38914df3f4f2e3b3/120x120-000000-80-0-0.jpg\",\n    genres: [\n      {\n        id: 152,\n        name: \"Rock\",\n        picture:\n          \"https://e-cdns-images.dzcdn.net/images/misc/b36ca681666d617edd0dcb5ab389a6ac/120x120-000000-80-0-0.jpg\",\n        type: \"genre\"\n      }\n    ],\n    artist: {\n      id: 4237492,\n      name: \"Король и Шут\",\n      picture:\n        \"https://e-cdns-images.dzcdn.net/images/artist/a2b3908e7fc9bf8493c8fc67f9054c06/120x120-000000-80-0-0.jpg\"\n    },\n    tracks: [\n      {\n        id: 143419098,\n        title: \"Бал лицемеров\",\n        link: \"https://www.deezer.com/track/143419098\",\n        preview:\n          \"https://cdns-preview-9.dzcdn.net/stream/c-9dc1400c177f68e8556e8baf44248d6c-4.mp3\"\n      },\n      {\n        id: 143419100,\n        title: \"Блуждают тени\",\n        link: \"https://www.deezer.com/track/143419100\",\n        preview:\n          \"https://cdns-preview-0.dzcdn.net/stream/c-0acc26a01722222d236b3dd9bcfc08c7-4.mp3\"\n      },\n      {\n        id: 143419102,\n        title: \"В гостях у соседа\",\n        link: \"https://www.deezer.com/track/143419102\",\n        preview:\n          \"https://cdns-preview-0.dzcdn.net/stream/c-02a58997880e22766ae0f70a93f088a7-4.mp3\"\n      },\n      {\n        id: 143419104,\n        title: \"Валет и дама\",\n        link: \"https://www.deezer.com/track/143419104\",\n        preview:\n          \"https://cdns-preview-6.dzcdn.net/stream/c-6a464f10a65c270fb66cfbfe59f37313-4.mp3\"\n      },\n      {\n        id: 143419106,\n        title: \"Вестник\",\n        link: \"https://www.deezer.com/track/143419106\",\n        preview:\n          \"https://cdns-preview-d.dzcdn.net/stream/c-d6290cad6afdfd877b4d89000f7585a4-4.mp3\"\n      },\n      {\n        id: 143419108,\n        title: \"Внезапная голова\",\n        link: \"https://www.deezer.com/track/143419108\",\n        preview:\n          \"https://cdns-preview-b.dzcdn.net/stream/c-be02ebae90ad0b8ac61d0c51446738a7-4.mp3\"\n      },\n      {\n        id: 143419110,\n        title: \"Волосокрад\",\n        link: \"https://www.deezer.com/track/143419110\",\n        preview:\n          \"https://cdns-preview-1.dzcdn.net/stream/c-1ac2391805f27252b0861873e9cb3dd7-4.mp3\"\n      },\n      {\n        id: 143419112,\n        title: \"Воспоминания о былой любви\",\n        link: \"https://www.deezer.com/track/143419112\",\n        preview:\n          \"https://cdns-preview-2.dzcdn.net/stream/c-2346e75e40834d0c499bc4deaa1ba26d-4.mp3\"\n      },\n      {\n        id: 143419114,\n        title: \"Дагон\",\n        link: \"https://www.deezer.com/track/143419114\",\n        preview:\n          \"https://cdns-preview-c.dzcdn.net/stream/c-cb6010af31ff3bc8dd052c920921a6d3-4.mp3\"\n      },\n      {\n        id: 143419116,\n        title: \"Два вора и монета\",\n        link: \"https://www.deezer.com/track/143419116\",\n        preview:\n          \"https://cdns-preview-f.dzcdn.net/stream/c-f9a14cf3687c6de755e81993a244a7ae-4.mp3\"\n      },\n      {\n        id: 143419118,\n        title: \"Джокер\",\n        link: \"https://www.deezer.com/track/143419118\",\n        preview:\n          \"https://cdns-preview-9.dzcdn.net/stream/c-9177074907b59fe153f49f41e7fa1888-4.mp3\"\n      },\n      {\n        id: 143419120,\n        title: \"Дурак и молния\",\n        link: \"https://www.deezer.com/track/143419120\",\n        preview:\n          \"https://cdns-preview-d.dzcdn.net/stream/c-df459c829c8d9c0543e41dadeb87018f-4.mp3\"\n      },\n      {\n        id: 143419122,\n        title: \"Ели мясо мужики\",\n        link: \"https://www.deezer.com/track/143419122\",\n        preview:\n          \"https://cdns-preview-b.dzcdn.net/stream/c-b0ba02d12108b192b23c7d32ff6ba9ea-8.mp3\"\n      },\n      {\n        id: 143419124,\n        title: \"Исповедь вампира\",\n        link: \"https://www.deezer.com/track/143419124\",\n        preview:\n          \"https://cdns-preview-a.dzcdn.net/stream/c-abe985fd455bda39b8d10b38c5bc4332-4.mp3\"\n      },\n      {\n        id: 143419126,\n        title: \"Камнем по голове\",\n        link: \"https://www.deezer.com/track/143419126\",\n        preview:\n          \"https://cdns-preview-8.dzcdn.net/stream/c-8c99bdab19ea1f1e40fd02ffd12fc009-4.mp3\"\n      }\n    ]\n  }\n];\n","import { MusicState } from \"./music.types\";\nimport { albumes } from \"./music.mock\";\n\nexport const initMusicState: MusicState = {\n  albumes,\n  album: albumes[0],\n  isDisabpleNext: false,\n  isDisablePrev: true,\n  currentTrack: albumes[0].tracks[0],\n  currentTrackIndex: 0\n};\n","import React from \"react\";\nimport { MusicState, MusicAction } from \"./store/music.types\";\nimport { initMusicState } from \"./store/music.initial\";\n\nexport interface MusicContextValue {\n  dispatch(action: MusicAction): void;\n  musicState: MusicState;\n}\n\nexport const MusicContext = React.createContext<MusicContextValue>({\n  dispatch: () => {},\n  musicState: initMusicState\n});\n","import React, { FC } from \"react\";\nimport { Typography } from \"@material-ui/core\";\n\nexport const Header: FC = () => {\n  return (\n    <header>\n      <Typography variant=\"h2\" align=\"center\">\n        Король и Шут\n      </Typography>\n    </header>\n  );\n};\n","import { makeStyles } from \"@material-ui/core\";\n\nexport const useStyles = makeStyles(theme => ({\n  audio: {\n    display: \"none\"\n  },\n  root: {\n    display: \"flex\"\n  },\n  details: {\n    display: \"flex\",\n    flexDirection: \"column\",\n    alignItems: \"center\",\n    flex: 1\n  },\n  content: {\n    flex: \"1 0 auto\"\n  },\n  cover: {\n    width: 151\n  },\n  controls: {\n    display: \"flex\",\n    alignItems: \"center\",\n    paddingLeft: theme.spacing(1),\n    paddingBottom: theme.spacing(1)\n  },\n  playIcon: {\n    height: 38,\n    width: 38\n  }\n}));\n","import React, { useContext, useState, useRef, useEffect } from \"react\";\nimport { useStyles } from \"./CardPlayer.styles\";\nimport {\n  Card,\n  CardContent,\n  Typography,\n  IconButton,\n  CardMedia\n} from \"@material-ui/core\";\nimport SkipPreviousIcon from \"@material-ui/icons/SkipPrevious\";\nimport PlayArrowIcon from \"@material-ui/icons/PlayArrow\";\nimport PauseIcon from \"@material-ui/icons/Pause\";\nimport SkipNextIcon from \"@material-ui/icons/SkipNext\";\nimport { MusicContext } from \"../../contexts\";\nimport { MusicActionTypes } from \"../../store/music.types\";\n\nexport const CardPlayer = () => {\n  const [isPlay, setIsPlay] = useState(false);\n  const audioRef = useRef<HTMLAudioElement>(null);\n  const { musicState, dispatch: dispatchMusicState } = useContext(MusicContext);\n  const {\n    album,\n    currentTrack: track,\n    isDisablePrev,\n    isDisabpleNext\n  } = musicState;\n  const classes = useStyles();\n\n  const handlePlayStopClick = () => {\n    setIsPlay((prevIsPlay: boolean) => !prevIsPlay);\n  };\n\n  const handleNextPlay = () => {\n    dispatchMusicState({ type: MusicActionTypes.NEXT_TRACK });\n    setIsPlay(false);\n  };\n\n  const handlePrevPlay = () => {\n    dispatchMusicState({ type: MusicActionTypes.PREV_TRACK });\n    setIsPlay(false);\n  };\n\n  useEffect(() => {\n    if (isPlay) {\n      audioRef.current?.play();\n    } else {\n      audioRef.current?.pause();\n    }\n  }, [isPlay]);\n\n  return (\n    <Card className={classes.root}>\n      <div className={classes.details}>\n        <CardContent className={classes.content}>\n          <Typography component=\"h5\" variant=\"h5\">\n            {track.title}\n          </Typography>\n          <Typography variant=\"subtitle1\" color=\"textSecondary\">\n            {album.artist.name}\n          </Typography>\n        </CardContent>\n        <div className={classes.controls}>\n          <IconButton\n            aria-label=\"previous\"\n            onClick={handlePrevPlay}\n            disabled={isDisablePrev}\n          >\n            <SkipPreviousIcon />\n          </IconButton>\n          <IconButton aria-label=\"play/pause\" onClick={handlePlayStopClick}>\n            {isPlay ? (\n              <PauseIcon className={classes.playIcon} />\n            ) : (\n              <PlayArrowIcon className={classes.playIcon} />\n            )}\n          </IconButton>\n          <IconButton\n            aria-label=\"next\"\n            onClick={handleNextPlay}\n            disabled={isDisabpleNext}\n          >\n            <SkipNextIcon />\n          </IconButton>\n        </div>\n        <audio\n          key={track.preview}\n          controls\n          ref={audioRef}\n          className={classes.audio}\n        >\n          <source src={track.preview} type=\"audio/mpeg\" />\n        </audio>\n      </div>\n      <CardMedia\n        className={classes.cover}\n        image={album.cover}\n        title={album.title}\n      />\n    </Card>\n  );\n};\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { App } from \"./App\";\nimport * as serviceWorker from \"./serviceWorker\";\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\n// serviceWorker.unregister();\n","import React, { useReducer } from \"react\";\nimport { musicReducer } from \"./store/music.reducer\";\nimport { MusicContextValue, MusicContext } from \"./contexts\";\nimport { Header } from \"./components/Header/Header\";\nimport { CardPlayer } from \"./components/CardPlayer/CardPlayer\";\nimport { initMusicState } from \"./store/music.initial\";\nimport { Box, CssBaseline } from \"@material-ui/core\";\n\nexport const App = () => {\n  const [musicState, dispatchMusicState] = useReducer(\n    musicReducer,\n    initMusicState\n  );\n  const musicContextValue = React.useMemo<MusicContextValue>(\n    () => ({ dispatch: dispatchMusicState, musicState }),\n    [musicState]\n  );\n\n  return (\n    <MusicContext.Provider value={musicContextValue}>\n      <CssBaseline />\n      <Box m={4}>\n        <Box mb={2}>\n          <Header />\n        </Box>\n        <CardPlayer />\n      </Box>\n    </MusicContext.Provider>\n  );\n};\n"],"sourceRoot":""}